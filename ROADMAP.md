# Seseragi言語 開発ロードマップ

## プロジェクト概要

Seseragiは、TypeScriptにトランスパイルされる純粋関数型プログラミング言語です。この文書は開発の現状と今後の計画を管理します。

## 現在の実装状況

### ✅ 完成済み
- **基本レキサー**: 全トークンの認識（完全実装）
- **基本パーサー**: AST生成（基本機能実装済み）
- **コード生成器**: TypeScriptへのトランスパイル（基本実装完了）
- **カリー化システム**: 自動カリー化とランタイム実装
- **基本演算子**: `+`, `-`, `*`, `/`, `%`のサポート
- **関数定義**: ワンライナーとブロック形式
- **変数宣言**: `let`キーワードによる不変変数
- **基本型**: `Int`, `Float`, `String`, `Bool`
- **モナド基礎**: `Maybe<T>`, `Either<L,R>`の基本実装
- **特殊演算子**: パイプライン`|`, 逆パイプ`~`, 関数適用`$`
- **CLI**: `compile`, `run`, `format`コマンド
- **テストスイート**: 20テスト通過

### 🔄 実装中
- **型システム拡張**: ジェネリック型の改善
- **パターンマッチング**: `match`構文の完全実装

### ❌ 未実装
- **副作用管理**: `effectful`, `elevate`, `IO<T>`
- **モジュールシステム**: `import`, `export`
- **型クラス**: `impl`, `monoid`
- **高度な機能**: REPL, 言語サーバー

## 優先度別タスク

### 🔴 高優先度（Phase 1: 1-2ヶ月）

#### 型システムの強化
- [ ] **型チェッカーの実装** - 静的型検証システム
- [ ] **型推論の改善** - より柔軟な型推論
- [ ] **ジェネリック型の完全サポート** - `List<T>`, `Maybe<T>`等
- [ ] **型エラーメッセージの改善** - 分かりやすいエラー表示

#### パターンマッチングの完成
- [ ] **`match`構文の完全実装** - 全パターンサポート
- [ ] **網羅性チェック** - パターンの漏れ検出
- [ ] **ガード条件サポート** - 条件付きパターン
- [ ] **ネストしたパターン** - 複雑なパターンマッチング

#### モナドシステムの拡張
- [ ] **`>>=`（bind）演算子** - モナドチェーンの実装
- [ ] **`<$>`（map）演算子** - ファンクターマップ
- [ ] **`<*>`（apply）演算子** - アプリカティブ

### 🟡 中優先度（Phase 2: 2-3ヶ月）

#### 副作用管理システム
- [ ] **`IO<T>`モナドの実装** - 副作用の型安全な管理
- [ ] **`effectful`関数** - 副作用を持つ関数の定義
- [ ] **`elevate`キーワード** - 純粋関数内での副作用呼び出し
- [ ] **純粋性チェック機能** - 副作用の静的検証

#### 型クラスシステム
- [ ] **`impl`ブロック** - メソッド実装
- [ ] **`operator`定義** - カスタム演算子
- [ ] **`monoid`サポート** - モノイド型クラス
- [ ] **`>>>`（fold monoid）演算子** - モノイド畳み込み

#### パフォーマンス最適化
- [ ] **不要なカリー化の除去** - 最適化
- [ ] **インライン化** - 関数呼び出しの最適化
- [ ] **デッドコード除去** - 未使用コードの削除

### 🟢 低優先度（Phase 3: 1-2ヶ月）

#### モジュールシステム
- [ ] **ファイルベースインポート** - `import`/`export`
- [ ] **名前空間管理** - モジュール間の名前衝突回避
- [ ] **循環依存検出** - モジュール依存関係の検証

#### 開発ツール
- [ ] **REPL実装** - インタラクティブな開発環境
- [ ] **言語サーバープロトコル** - エディタサポート
- [ ] **シンタックスハイライト** - VSCode拡張
- [ ] **デバッガサポート** - ステップ実行機能

#### 標準ライブラリ
- [ ] **Listライブラリ** - リスト操作関数群
- [ ] **Stringライブラリ** - 文字列操作関数群
- [ ] **Mathライブラリ** - 数学関数群
- [ ] **IOライブラリ** - ファイル操作関数群

## フェーズ別開発計画

### Phase 1: コア機能の完成（1-2ヶ月）
**目標**: 基本的な関数型プログラミングが完全に動作する状態

**重点分野:**
- 型システムの安定化
- パターンマッチングの完全実装
- モナド演算子の実装
- 基本的なエラーハンドリング

**成功指標:**
- 複雑な型推論が動作
- 全パターンマッチングが実装済み
- Maybe/Eitherモナドが完全動作
- コンパイルエラーが分かりやすい

### Phase 2: 高度な機能（2-3ヶ月）
**目標**: 実用的なアプリケーション開発が可能な状態

**重点分野:**
- 副作用管理システム
- 型クラスとカスタム演算子
- パフォーマンス最適化
- エラーハンドリングの充実

**成功指標:**
- ファイルI/Oが型安全に実行可能
- カスタム型とメソッドが定義可能
- 実用的な速度で実行
- 本格的なプログラムが書ける

### Phase 3: 開発環境の整備（1-2ヶ月）
**目標**: 快適な開発体験の提供

**重点分野:**
- モジュールシステム
- 開発ツール（REPL, 言語サーバー）
- 標準ライブラリの充実
- ドキュメントとチュートリアル

**成功指標:**
- 複数ファイルプロジェクトが組織可能
- エディタサポートが充実
- 豊富な標準ライブラリ
- 学習リソースが充実

## マイルストーン

### Milestone 1: 型安全な関数型プログラミング（2ヶ月目標）
- [ ] 型チェッカー完成
- [ ] パターンマッチング完成
- [ ] モナド演算子完成
- [ ] 基本的なプログラムが完全動作

### Milestone 2: 実用アプリケーション開発可能（4ヶ月目標）
- [ ] 副作用管理完成
- [ ] 型クラス完成
- [ ] パフォーマンス最適化
- [ ] 小規模アプリが開発可能

### Milestone 3: 本格的な言語として完成（6ヶ月目標）
- [ ] モジュールシステム完成
- [ ] 開発ツール完成
- [ ] 標準ライブラリ充実
- [ ] 中規模プロジェクトが開発可能

## 進捗トラッキング

### 週次レビューポイント
- [ ] 新機能の実装進捗
- [ ] テストケースの追加状況
- [ ] パフォーマンスベンチマーク
- [ ] ドキュメントの更新状況

### 品質指標
- **テストカバレッジ**: 目標 90%以上
- **コンパイル時間**: 目標 1000行/秒以上
- **実行時性能**: 目標 JavaScript比 80%以上
- **メモリ使用量**: 目標 妥当な範囲内

### リスク管理
- **技術的難易度**: 型推論の複雑さ
- **スコープクリープ**: 機能追加の制御
- **パフォーマンス**: JavaScript実行速度の制約
- **開発リソース**: 個人開発の時間制約

## 関連ドキュメント

- **`grammar-complete.md`** - 完全言語仕様（最終目標）
- **`grammar-current.md`** - 実装済み機能仕様
- **`CLAUDE.md`** - 開発環境とコマンド
- **`examples/`** - サンプルコードとチュートリアル

---

**最終更新**: 2025-06-25  
**次回レビュー**: 2025-07-02